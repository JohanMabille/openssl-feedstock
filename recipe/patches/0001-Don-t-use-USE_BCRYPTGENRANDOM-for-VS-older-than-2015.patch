From 316f8d9967936c184ea8067534500be02a6211ff Mon Sep 17 00:00:00 2001
From: Jonathan Helmus <jjhelmus@gmail.com>
Date: Wed, 6 Nov 2019 14:13:24 -0600
Subject: [PATCH] Don't use USE_BCRYPTGENRANDOM for VS older than 2015

---
 providers/implementations/rands/seeding/rand_win.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/providers/implementations/rands/seeding/rand_win.c b/providers/implementations/rands/seeding/rand_win.c
index 704705425a..fab4df23e9 100644
--- a/providers/implementations/rands/seeding/rand_win.c
+++ b/providers/implementations/rands/seeding/rand_win.c
@@ -21,7 +21,7 @@
 
 # include <windows.h>
 /* On Windows Vista or higher use BCrypt instead of the legacy CryptoAPI */
-# if defined(_MSC_VER) && _MSC_VER > 1500 /* 1500 = Visual Studio 2008 */ \
+# if defined(_MSC_VER) && _MSC_VER >= 19000 /* 19000 = Visual Studio 2015 */ \
      && defined(_WIN32_WINNT) && _WIN32_WINNT >= 0x0600
 #  define USE_BCRYPTGENRANDOM
 # endif
-- 
2.32.0.windows.2

